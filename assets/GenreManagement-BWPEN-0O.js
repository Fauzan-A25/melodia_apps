import{m as e,n as t,p as n,r,u as i}from"./index-SVkmEz3k.js";var a=e(n(),1),o={genreContainer:`_genreContainer_1edqq_1`,genreHeader:`_genreHeader_1edqq_13`,pageTitle:`_pageTitle_1edqq_27`,pageSubtitle:`_pageSubtitle_1edqq_49`,addBtn:`_addBtn_1edqq_61`,errorBanner:`_errorBanner_1edqq_97`,genreList:`_genreList_1edqq_155`,genreCard:`_genreCard_1edqq_167`,genreIcon:`_genreIcon_1edqq_201`,genreInfo:`_genreInfo_1edqq_225`,songCount:`_songCount_1edqq_261`,genreActions:`_genreActions_1edqq_273`,editBtn:`_editBtn_1edqq_283`,deleteBtn:`_deleteBtn_1edqq_285`,emptyState:`_emptyState_1edqq_351`,modalOverlay:`_modalOverlay_1edqq_373`,modalContent:`_modalContent_1edqq_401`,modalHeader:`_modalHeader_1edqq_423`,closeBtn:`_closeBtn_1edqq_451`,formGroup:`_formGroup_1edqq_493`,modalActions:`_modalActions_1edqq_569`,cancelBtn:`_cancelBtn_1edqq_583`,saveBtn:`_saveBtn_1edqq_585`,loadingContainer:`_loadingContainer_1edqq_657`,spinner:`_spinner_1edqq_675`,spin:`_spin_1edqq_675`},s=e(i(),1),c=()=>{let[e,n]=(0,a.useState)([]),[i,c]=(0,a.useState)(!0),[l,u]=(0,a.useState)(null),[d,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),[h,g]=(0,a.useState)(!1),[_,v]=(0,a.useState)({genreName:``,description:``});(0,a.useEffect)(()=>{y()},[]);let y=async()=>{c(!0),u(null);try{n(await t.getAllGenres())}catch(e){console.error(`Error fetching genres:`,e),u(r(e))}finally{c(!1)}},b=()=>{v({genreName:``,description:``}),m(null),f(!0)},x=e=>{v({genreName:e.name,description:e.description}),m(e),f(!0)},S=async e=>{e.preventDefault(),g(!0),u(null);try{p?await t.updateGenre(p.id,_.genreName,_.description):await t.createGenre(_.genreName,_.description),f(!1),y()}catch(e){console.error(`Error saving genre:`,e),u(r(e))}finally{g(!1)}},C=async(e,n)=>{if(window.confirm(`Apakah Anda yakin ingin menghapus genre "${n}"?`))try{await t.deleteGenre(e),y()}catch(e){console.error(`Error deleting genre:`,e),alert(r(e))}};return i?(0,s.jsxs)(`div`,{className:o.loadingContainer,children:[(0,s.jsx)(`div`,{className:o.spinner,children:`â³`}),(0,s.jsx)(`p`,{children:`Loading genres...`})]}):(0,s.jsxs)(`div`,{className:o.genreContainer,children:[(0,s.jsxs)(`div`,{className:o.genreHeader,children:[(0,s.jsxs)(`div`,{children:[(0,s.jsx)(`h1`,{className:o.pageTitle,children:`Genre Management`}),(0,s.jsx)(`p`,{className:o.pageSubtitle,children:`Kelola genre musik di Melodia`})]}),(0,s.jsx)(`button`,{className:o.addBtn,onClick:b,children:`âž• Add New Genre`})]}),l&&(0,s.jsxs)(`div`,{className:o.errorBanner,children:[(0,s.jsxs)(`span`,{children:[`âš ï¸ `,l]}),(0,s.jsx)(`button`,{onClick:()=>u(null),children:`âœ•`})]}),(0,s.jsx)(`div`,{className:o.genreList,children:e.length===0?(0,s.jsx)(`div`,{className:o.emptyState,children:(0,s.jsx)(`p`,{children:`Belum ada genre. Tambahkan genre pertama Anda!`})}):e.map(e=>(0,s.jsxs)(`div`,{className:o.genreCard,children:[`  `,(0,s.jsx)(`div`,{className:o.genreIcon,children:`ðŸŽµ`}),(0,s.jsxs)(`div`,{className:o.genreInfo,children:[(0,s.jsx)(`h3`,{children:e.name}),`  `,(0,s.jsx)(`p`,{children:e.description||`No description`}),e.songCount!==void 0&&(0,s.jsxs)(`span`,{className:o.songCount,children:[e.songCount,` songs`]})]}),(0,s.jsxs)(`div`,{className:o.genreActions,children:[(0,s.jsx)(`button`,{className:o.editBtn,onClick:()=>x(e),children:`âœï¸ Edit`}),(0,s.jsx)(`button`,{className:o.deleteBtn,onClick:()=>C(e.id,e.name),children:`ðŸ—‘ï¸ Delete`})]})]},e.id))}),d&&(0,s.jsx)(`div`,{className:o.modalOverlay,onClick:()=>!h&&f(!1),children:(0,s.jsxs)(`div`,{className:o.modalContent,onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)(`div`,{className:o.modalHeader,children:[(0,s.jsx)(`h2`,{children:p?`Edit Genre`:`Add New Genre`}),(0,s.jsx)(`button`,{className:o.closeBtn,onClick:()=>f(!1),disabled:h,children:`âœ•`})]}),(0,s.jsxs)(`form`,{onSubmit:S,children:[(0,s.jsxs)(`div`,{className:o.formGroup,children:[(0,s.jsx)(`label`,{children:`Genre Name *`}),(0,s.jsx)(`input`,{type:`text`,value:_.genreName,onChange:e=>v({..._,genreName:e.target.value}),placeholder:`e.g., Pop, Rock, Jazz`,required:!0,disabled:h})]}),(0,s.jsxs)(`div`,{className:o.formGroup,children:[(0,s.jsx)(`label`,{children:`Description`}),(0,s.jsx)(`textarea`,{value:_.description,onChange:e=>v({..._,description:e.target.value}),placeholder:`Enter genre description...`,rows:`4`,disabled:h})]}),(0,s.jsxs)(`div`,{className:o.modalActions,children:[(0,s.jsx)(`button`,{type:`button`,className:o.cancelBtn,onClick:()=>f(!1),disabled:h,children:`Cancel`}),(0,s.jsxs)(`button`,{type:`submit`,className:o.saveBtn,disabled:h,children:[h?`Saving...`:p?`Update`:`Add`,` Genre`]})]})]})]})})]})};export{c as default};