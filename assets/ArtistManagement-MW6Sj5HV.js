import{d as e,n as t,o as n,r,t as i}from"./adminService-bkkylZxw.js";var a=e(n(),1),o={container:`_container_19eem_5`,header:`_header_19eem_17`,loadingContainer:`_loadingContainer_19eem_61`,spinner:`_spinner_19eem_81`,spin:`_spin_19eem_81`,errorBanner:`_errorBanner_19eem_113`,form:`_form_19eem_171`,formRow:`_formRow_19eem_199`,formGroup:`_formGroup_19eem_211`,createBtn:`_createBtn_19eem_309`,tableWrapper:`_tableWrapper_19eem_357`,table:`_table_19eem_357`,bioCell:`_bioCell_19eem_461`,deleteBtn:`_deleteBtn_19eem_477`,emptyState:`_emptyState_19eem_513`},s=e(r(),1),c=()=>{let[e,n]=(0,a.useState)([]),[r,c]=(0,a.useState)(!0),[l,u]=(0,a.useState)(null),[d,f]=(0,a.useState)(``),[p,m]=(0,a.useState)(``),[h,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{_()},[]);let _=async()=>{c(!0),u(null);try{n(await i.getAllArtists())}catch(e){console.error(`Error fetching artists:`,e),u(t(e))}finally{c(!1)}},v=async e=>{if(e.preventDefault(),!d.trim()){u(`Artist name is required`);return}g(!0),u(null);try{await i.createArtist(d.trim(),p.trim()),f(``),m(``),await _()}catch(e){console.error(`Error creating artist:`,e),u(t(e))}finally{g(!1)}},y=async(e,n)=>{if(window.confirm(`Yakin ingin menghapus artist "${n}"?\nJika masih ada lagu yang terhubung, penghapusan bisa gagal.`))try{await i.deleteArtist(e),await _()}catch(e){console.error(`Error deleting artist:`,e),alert(t(e))}};return r?(0,s.jsxs)(`div`,{className:o.loadingContainer,children:[(0,s.jsx)(`div`,{className:o.spinner,children:`â³`}),(0,s.jsx)(`p`,{children:`Loading artists...`})]}):(0,s.jsxs)(`div`,{className:o.container,children:[(0,s.jsxs)(`div`,{className:o.header,children:[(0,s.jsx)(`h1`,{children:`Artist Management`}),(0,s.jsx)(`p`,{children:`Kelola metadata artist yang dipakai saat upload lagu`})]}),l&&(0,s.jsxs)(`div`,{className:o.errorBanner,children:[(0,s.jsxs)(`span`,{children:[`âš ï¸ `,l]}),(0,s.jsx)(`button`,{onClick:()=>u(null),children:`âœ•`})]}),(0,s.jsxs)(`form`,{onSubmit:v,className:o.form,children:[(0,s.jsx)(`div`,{className:o.formRow,children:(0,s.jsxs)(`div`,{className:o.formGroup,children:[(0,s.jsx)(`label`,{children:`Artist Name *`}),(0,s.jsx)(`input`,{type:`text`,value:d,onChange:e=>f(e.target.value),placeholder:`Contoh: Tulus`,disabled:h})]})}),(0,s.jsxs)(`div`,{className:o.formGroup,children:[(0,s.jsx)(`label`,{children:`Bio (optional)`}),(0,s.jsx)(`textarea`,{value:p,onChange:e=>m(e.target.value),placeholder:`Deskripsi singkat artist...`,rows:3,disabled:h})]}),(0,s.jsx)(`button`,{type:`submit`,className:o.createBtn,disabled:h,children:h?`Saving...`:`Add Artist`})]}),(0,s.jsxs)(`div`,{className:o.tableWrapper,children:[(0,s.jsxs)(`table`,{className:o.table,children:[(0,s.jsx)(`thead`,{children:(0,s.jsxs)(`tr`,{children:[(0,s.jsx)(`th`,{children:`Name`}),(0,s.jsx)(`th`,{children:`Bio`}),(0,s.jsx)(`th`,{children:`Total Songs (optional)`}),(0,s.jsx)(`th`,{children:`Actions`})]})}),(0,s.jsx)(`tbody`,{children:e.map(e=>(0,s.jsxs)(`tr`,{children:[(0,s.jsx)(`td`,{children:e.artistName}),(0,s.jsx)(`td`,{className:o.bioCell,children:e.bio&&e.bio.length>120?e.bio.slice(0,120)+`...`:e.bio||`-`}),(0,s.jsx)(`td`,{children:e.totalSongs==null?e.songs?e.songs.length:`-`:e.totalSongs}),(0,s.jsx)(`td`,{children:(0,s.jsx)(`button`,{className:o.deleteBtn,onClick:()=>y(e.artistId,e.artistName),children:`ğŸ—‘ï¸ Delete`})})]},e.artistId))})]}),e.length===0&&(0,s.jsx)(`div`,{className:o.emptyState,children:(0,s.jsx)(`p`,{children:`Belum ada artist. Tambahkan artist pertama di atas.`})})]})]})};export{c as default};