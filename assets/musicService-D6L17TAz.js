import{i as e}from"./adminService-bkkylZxw.js";const t={getAllSongs:async()=>{let t=await fetch(`${e}/songs`);if(!t.ok)throw Error(`Failed to fetch songs`);let n=await t.json();return n.data||n},getSongById:async t=>{let n=await fetch(`${e}/songs/${t}`);if(!n.ok)throw Error(`Song not found`);let r=await n.json();return r.data||r},searchSongs:async t=>{let n=await fetch(`${e}/songs/search?query=${encodeURIComponent(t)}`);if(!n.ok)throw Error(`Search failed`);let r=await n.json();return r.data||r},searchByTitle:async t=>{let n=await fetch(`${e}/songs/search/title?query=${encodeURIComponent(t)}`);if(!n.ok)throw Error(`Search failed`);let r=await n.json();return r.data||r},searchByArtist:async t=>{let n=await fetch(`${e}/songs/search/artist?query=${encodeURIComponent(t)}`);if(!n.ok)throw Error(`Search failed`);let r=await n.json();return r.data||r},filterByGenre:async t=>{let n=await fetch(`${e}/songs/filter/genre?name=${encodeURIComponent(t)}`);if(!n.ok)throw Error(`Filter failed`);let r=await n.json();return r.data||r},filterByYear:async t=>{let n=await fetch(`${e}/songs/filter/year?year=${t}`);if(!n.ok)throw Error(`Filter failed`);let r=await n.json();return r.data||r},getStreamUrl:t=>`${e}/songs/stream/${t}`,createPlaylist:async(t,n,r=``)=>{let i=await fetch(`${e}/playlists`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({userId:t,name:n,description:r})});if(!i.ok){let e=await i.json().catch(()=>({message:`Failed to create playlist`}));throw Error(e.message||`Failed to create playlist`)}let a=await i.json();return a.data||a},getUserPlaylists:async t=>{if(!t||t.startsWith(`ADM`))return[];let n=await fetch(`${e}/playlists/user/${t}`);if(!n.ok){if(n.status===404)return[];throw Error(`Failed to fetch user playlists`)}let r=await n.json();return r.data||r},getPlaylistById:async t=>{let n=await fetch(`${e}/playlists/${t}`);if(!n.ok)throw Error(`Playlist not found`);let r=await n.json();return r.data||r},updatePlaylist:async(t,n,r,i)=>{let a=await fetch(`${e}/playlists/${t}`,{method:`PUT`,headers:{"Content-Type":`application/json`},body:JSON.stringify({userId:n,name:r,description:i})});if(!a.ok){let e=await a.json().catch(()=>({message:`Failed to update playlist`}));throw Error(e.message||`Failed to update playlist`)}let o=await a.json();return o.data||o},deletePlaylist:async(t,n)=>{let r=await fetch(`${e}/playlists/${t}?userId=${n}`,{method:`DELETE`,headers:{"Content-Type":`application/json`}});if(!r.ok){let e=await r.json().catch(()=>({message:`Failed to delete playlist`}));throw Error(e.message||`Failed to delete playlist`)}let i=await r.json();return i.data||i},addSongToPlaylist:async(t,n,r)=>{let i=await fetch(`${e}/playlists/${t}/songs`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({songId:n,userId:r})});if(!i.ok){let e=await i.json().catch(()=>({message:`Failed to add song`}));throw Error(e.message||`Failed to add song to playlist`)}let a=await i.json();return a.data||a},removeSongFromPlaylist:async(t,n,r)=>{let i=await fetch(`${e}/playlists/${t}/songs/${n}?userId=${r}`,{method:`DELETE`,headers:{"Content-Type":`application/json`}});if(!i.ok){let e=await i.json().catch(()=>({message:`Failed to remove song`}));throw Error(e.message||`Failed to remove song from playlist`)}let a=await i.json();return a.data||a},searchPlaylists:async t=>{let n=await fetch(`${e}/playlists/search?query=${encodeURIComponent(t)}`);if(!n.ok)throw Error(`Search failed`);let r=await n.json();return r.data||r},getPlaylistSongs:async t=>{let n=await fetch(`${e}/playlists/${t}/songs`);if(!n.ok)throw Error(`Failed to fetch playlist songs`);let r=await n.json();return r.data||r},getUserHistory:async t=>{let n=await fetch(`${e}/history/${t}`);if(!n.ok)throw Error(`Failed to fetch history`);let r=await n.json();return r.data||r},getPlayedSongs:async t=>{let n=await fetch(`${e}/history/${t}/songs`);if(!n.ok)throw Error(`Failed to fetch played songs`);let r=await n.json();return r.data||r},getRecentlyPlayedSongs:async(t,n=10)=>{if(n<=0)throw Error(`Limit must be positive`);let r=await fetch(`${e}/history/${t}/songs/recent?limit=${n}`);if(!r.ok)throw Error(`Failed to fetch recent songs`);let i=await r.json();return i.data||i},addSongToHistory:async(t,n)=>{let r=await fetch(`${e}/history/${t}/songs`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({songId:n})});if(!r.ok){let e=`Failed to add song to history`;try{let t=await r.json();t?.message&&(e=t.message)}catch{let t=await r.text();t&&(e=t)}throw Error(e)}let i=await r.json();return i.data||i},removeSongFromHistory:async(t,n)=>{let r=await fetch(`${e}/history/${t}/songs/${n}`,{method:`DELETE`,headers:{"Content-Type":`application/json`}});if(!r.ok){let e=`Failed to remove song from history`;try{let t=await r.json();t?.message&&(e=t.message)}catch{let t=await r.text();t&&(e=t)}throw Error(e)}let i=await r.json();return i.data||i},clearUserHistory:async t=>{let n=await fetch(`${e}/history/${t}`,{method:`DELETE`,headers:{"Content-Type":`application/json`}});if(!n.ok){let e=`Failed to clear history`;try{let t=await n.json();t?.message&&(e=t.message)}catch{let t=await n.text();t&&(e=t)}throw Error(e)}let r=await n.json();return r.data||r},checkIfSongPlayed:async(t,n)=>{let r=await fetch(`${e}/history/${t}/songs/${n}/played`);if(!r.ok)throw Error(`Failed to check song played status`);let i=await r.json();return i.data||i},getHistorySummary:async t=>{let n=await fetch(`${e}/history/${t}/summary`);if(!n.ok)throw Error(`Failed to fetch history summary`);let r=await n.json();return r.data||r},getAllAlbums:async()=>{let t=await fetch(`${e}/albums`);if(!t.ok){let e=`Failed to fetch albums`;try{let n=await t.json();n?.message&&(e=n.message)}catch{let n=await t.text();n&&(e=n)}throw Error(e)}let n=await t.json();return n.data||n},getAlbumById:async t=>{let n=await fetch(`${e}/albums/${t}`);if(!n.ok){let e=`Failed to fetch album`;if(n.status===404)e=`Album not found`;else try{let t=await n.json();t?.message&&(e=t.message)}catch{let t=await n.text();t&&(e=t)}throw Error(e)}let r=await n.json();return r.data||r},getAlbumSongs:async t=>{let n=await fetch(`${e}/albums/${t}/songs`);if(!n.ok){let e=`Failed to fetch album songs`;if(n.status===404)e=`Album not found`;else try{let t=await n.json();t?.message&&(e=t.message)}catch{let t=await n.text();t&&(e=t)}throw Error(e)}let r=await n.json();return r.data||r},getAlbumsByArtist:async t=>{let n=await fetch(`${e}/albums/artist/${t}`);if(!n.ok){let e=`Failed to fetch artist albums`;try{let t=await n.json();t?.message&&(e=t.message)}catch{let t=await n.text();t&&(e=t)}throw Error(e)}let r=await n.json();return r.data||r},searchAlbums:async t=>{let n=await fetch(`${e}/albums/search?title=${encodeURIComponent(t)}`);if(!n.ok){let e=`Album search failed`;try{let t=await n.json();t?.message&&(e=t.message)}catch{let t=await n.text();t&&(e=t)}throw Error(e)}let r=await n.json();return r.data||r},filterAlbumsByGenre:async t=>{let n=await fetch(`${e}/albums/genre/${encodeURIComponent(t)}`);if(!n.ok){let e=`Failed to filter albums by genre`;try{let t=await n.json();t?.message&&(e=t.message)}catch{let t=await n.text();t&&(e=t)}throw Error(e)}let r=await n.json();return r.data||r},filterAlbumsByYear:async t=>{let n=await fetch(`${e}/albums/year/${t}`);if(!n.ok){let e=`Failed to filter albums by year`;try{let t=await n.json();t?.message&&(e=t.message)}catch{let t=await n.text();t&&(e=t)}throw Error(e)}let r=await n.json();return r.data||r},createAlbum:async(t,n,r,i=[])=>{let a=new URLSearchParams({title:t,artistId:n,releaseYear:r.toString()});i&&i.length>0&&i.forEach(e=>a.append(`genreNames`,e));let o=await fetch(`${e}/albums?${a.toString()}`,{method:`POST`,headers:{"Content-Type":`application/json`}});if(!o.ok){let e=`Failed to create album`;try{let t=await o.json();t?.message&&(e=t.message)}catch{let t=await o.text();t&&(e=t)}throw Error(e)}let s=await o.json();return s.data||s},updateAlbum:async(t,n=null,r=null)=>{let i=new URLSearchParams;n&&n.trim()&&i.append(`title`,n),r&&i.append(`releaseYear`,r.toString());let a=await fetch(`${e}/albums/${t}?${i.toString()}`,{method:`PUT`,headers:{"Content-Type":`application/json`}});if(!a.ok){let e=`Failed to update album`;try{let t=await a.json();t?.message&&(e=t.message)}catch{let t=await a.text();t&&(e=t)}throw Error(e)}let o=await a.json();return o.data||o},deleteAlbum:async t=>{let n=await fetch(`${e}/albums/${t}`,{method:`DELETE`,headers:{"Content-Type":`application/json`}});if(!n.ok){let e=`Failed to delete album`;try{let t=await n.json();t?.message&&(e=t.message)}catch{let t=await n.text();t&&(e=t)}throw Error(e)}if(n.status===204)return{message:`Album deleted successfully`};let r=await n.json();try{return r.data||r}catch{return{message:`Album deleted successfully`}}},addSongToAlbum:async(t,n)=>{let r=await fetch(`${e}/albums/${t}/songs/${n}`,{method:`POST`,headers:{"Content-Type":`application/json`}});if(!r.ok){let e=`Failed to add song to album`;try{let t=await r.json();t?.message&&(e=t.message)}catch{let t=await r.text();t&&(e=t)}throw Error(e)}let i=await r.json();try{return i.data||i}catch{return{message:`Song added to album successfully`}}},removeSongFromAlbum:async(t,n)=>{let r=await fetch(`${e}/albums/${t}/songs/${n}`,{method:`DELETE`,headers:{"Content-Type":`application/json`}});if(!r.ok){let e=`Failed to remove song from album`;try{let t=await r.json();t?.message&&(e=t.message)}catch{let t=await r.text();t&&(e=t)}throw Error(e)}let i=await r.json();try{return i.data||i}catch{return{message:`Song removed from album successfully`}}},getAlbumsCount:async()=>{let t=await fetch(`${e}/albums/stats/count`);if(!t.ok)throw Error(`Failed to fetch albums count`);let n=await t.json();return n.data||n},getAlbumSongCount:async t=>{let n=await fetch(`${e}/albums/${t}/stats/songs`);if(!n.ok){let e=`Failed to fetch song count`;try{let t=await n.json();t?.message&&(e=t.message)}catch{let t=await n.text();t&&(e=t)}throw Error(e)}let r=await n.json();return r.data||r}};export{t};