import{m as e,n as t,p as n,u as r}from"./index-B5QWN-PT.js";var i=e(n(),1),a={container:`_container_1qdmt_5`,header:`_header_1qdmt_19`,error:`_error_1qdmt_59`,controls:`_controls_1qdmt_83`,searchInput:`_searchInput_1qdmt_107`,filterSelect:`_filterSelect_1qdmt_151`,stats:`_stats_1qdmt_199`,empty:`_empty_1qdmt_231`,tableContainer:`_tableContainer_1qdmt_253`,table:`_table_1qdmt_253`,titleCell:`_titleCell_1qdmt_349`,titleInfo:`_titleInfo_1qdmt_359`,songTitle:`_songTitle_1qdmt_371`,genresWrapper:`_genresWrapper_1qdmt_387`,genreBadge:`_genreBadge_1qdmt_403`,deleteBtn:`_deleteBtn_1qdmt_431`,loadingState:`_loadingState_1qdmt_477`,spinner:`_spinner_1qdmt_495`,spin:`_spin_1qdmt_495`,modalOverlay:`_modalOverlay_1qdmt_545`,fadeIn:`_fadeIn_1qdmt_1`,modal:`_modal_1qdmt_545`,slideUp:`_slideUp_1qdmt_1`,warning:`_warning_1qdmt_681`,modalActions:`_modalActions_1qdmt_703`,cancelBtn:`_cancelBtn_1qdmt_715`,confirmDeleteBtn:`_confirmDeleteBtn_1qdmt_717`},o=e(r(),1),s=()=>{let[e,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(!0),[l,u]=(0,i.useState)(``),[d,f]=(0,i.useState)({show:!1,song:null}),[p,m]=(0,i.useState)(``),[h,g]=(0,i.useState)(``),[_,v]=(0,i.useState)([]);(0,i.useEffect)(()=>{y()},[]);let y=async()=>{try{s(!0);let[e,r]=await Promise.all([t.getAllSongs(),t.getAllGenres()]);n(e),v(r),u(``)}catch{u(`Failed to load songs`)}finally{s(!1)}},b=e=>{f({show:!0,song:e})},x=async()=>{if(!d.song)return;let e=d.song;try{await t.deleteSong(e.songId),n(t=>t.filter(t=>t.songId!==e.songId)),f({show:!1,song:null})}catch(e){alert(`Failed to delete song: `+e.message)}},S=()=>{f({show:!1,song:null})},C=e.filter(e=>{let t=e.artistName||e.artist?.artistName||``,n=e.title?.toLowerCase().includes(p.toLowerCase())||t.toLowerCase().includes(p.toLowerCase()),r=!h||e.genres&&e.genres.some(e=>e.name===h);return n&&r});return r?(0,o.jsx)(`div`,{className:a.container,children:(0,o.jsxs)(`div`,{className:a.loadingState,children:[(0,o.jsx)(`div`,{className:a.spinner}),(0,o.jsx)(`p`,{children:`Loading all songs...`})]})}):(0,o.jsxs)(`div`,{className:a.container,children:[(0,o.jsxs)(`div`,{className:a.header,children:[(0,o.jsx)(`h1`,{children:`ðŸŽµ Song Management`}),(0,o.jsx)(`p`,{children:`Manage all songs in the platform`})]}),l&&(0,o.jsxs)(`div`,{className:a.error,children:[l,(0,o.jsx)(`button`,{onClick:y,style:{marginLeft:`10px`},children:`Retry`})]}),(0,o.jsxs)(`div`,{className:a.controls,children:[(0,o.jsx)(`input`,{type:`text`,placeholder:`Search by title or artist...`,value:p,onChange:e=>m(e.target.value),className:a.searchInput}),(0,o.jsxs)(`select`,{value:h,onChange:e=>g(e.target.value),className:a.filterSelect,children:[(0,o.jsx)(`option`,{value:``,children:`All Genres`}),_.map(e=>(0,o.jsx)(`option`,{value:e.name,children:e.name},e.genreId||e.id||`genre-${e.name}`))]}),(0,o.jsxs)(`div`,{className:a.stats,children:[`Showing: `,(0,o.jsx)(`strong`,{children:C.length}),` / `,e.length,` songs`]})]}),C.length===0?(0,o.jsx)(`div`,{className:a.empty,children:p||h?`No songs found matching your criteria`:`No songs available`}):(0,o.jsx)(`div`,{className:a.tableContainer,children:(0,o.jsxs)(`table`,{className:a.table,children:[(0,o.jsx)(`thead`,{children:(0,o.jsxs)(`tr`,{children:[(0,o.jsx)(`th`,{children:`Title`}),(0,o.jsx)(`th`,{children:`Artist`}),(0,o.jsx)(`th`,{children:`Genre`}),(0,o.jsx)(`th`,{children:`Year`}),(0,o.jsx)(`th`,{children:`Duration`}),(0,o.jsx)(`th`,{children:`Actions`})]})}),(0,o.jsx)(`tbody`,{children:C.map(e=>(0,o.jsxs)(`tr`,{children:[(0,o.jsx)(`td`,{className:a.titleCell,children:(0,o.jsx)(`div`,{className:a.titleInfo,children:(0,o.jsx)(`span`,{className:a.songTitle,children:e.title})})}),(0,o.jsx)(`td`,{children:e.artistName||e.artist?.artistName||`Unknown Artist`}),(0,o.jsx)(`td`,{children:e.genres&&e.genres.length>0?(0,o.jsx)(`div`,{className:a.genresWrapper,children:e.genres.map((t,n)=>{let r=t.genreId?`${e.songId}-${t.genreId}`:`${e.songId}-${t.name}-${n}`;return(0,o.jsx)(`span`,{className:a.genreBadge,children:t.name},r)})}):(0,o.jsx)(`span`,{className:a.genreBadge,children:`Unknown`})}),(0,o.jsx)(`td`,{children:e.releaseYear||`N/A`}),(0,o.jsx)(`td`,{children:c(e.duration)}),(0,o.jsx)(`td`,{children:(0,o.jsx)(`button`,{onClick:()=>b(e),className:a.deleteBtn,title:`Delete "${e.title}"`,children:`ðŸ—‘ï¸ Delete`})})]},e.songId))})]})}),d.show&&d.song&&(0,o.jsx)(`div`,{className:a.modalOverlay,onClick:S,children:(0,o.jsxs)(`div`,{className:a.modal,onClick:e=>e.stopPropagation(),children:[(0,o.jsx)(`h2`,{children:`âš ï¸ Delete Song`}),(0,o.jsxs)(`p`,{children:[`Are you sure you want to delete`,` `,(0,o.jsxs)(`strong`,{children:[`"`,d.song.title,`"`]}),` by`,` `,(0,o.jsx)(`strong`,{children:d.song.artistName||d.song.artist?.artistName||`Unknown`}),`?`]}),(0,o.jsx)(`p`,{className:a.warning,children:`âš ï¸ This action is permanent and cannot be undone. The song will be removed from all playlists.`}),(0,o.jsxs)(`div`,{className:a.modalActions,children:[(0,o.jsx)(`button`,{onClick:S,className:a.cancelBtn,children:`Cancel`}),(0,o.jsx)(`button`,{onClick:x,className:a.confirmDeleteBtn,children:`Delete Permanently`})]})]})})]})},c=e=>!e||e===0?`0:00`:`${Math.floor(e/60)}:${(e%60).toString().padStart(2,`0`)}`,l=s;export{l as default};