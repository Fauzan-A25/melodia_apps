import{m as e,n as t,p as n,r,u as i}from"./index-NCgxGRq4.js";var a=e(n(),1),o={userManagementContainer:`_userManagementContainer_1nty1_1`,userHeader:`_userHeader_1nty1_13`,pageTitle:`_pageTitle_1nty1_21`,pageSubtitle:`_pageSubtitle_1nty1_43`,errorBanner:`_errorBanner_1nty1_57`,controlBar:`_controlBar_1nty1_115`,filterTabs:`_filterTabs_1nty1_133`,filterTab:`_filterTab_1nty1_133`,active:`_active_1nty1_185`,alert:`_alert_1nty1_195`,searchBox:`_searchBox_1nty1_213`,userTable:`_userTable_1nty1_267`,bannedRow:`_bannedRow_1nty1_355`,userCell:`_userCell_1nty1_373`,userAvatar:`_userAvatar_1nty1_385`,userName:`_userName_1nty1_409`,userMeta:`_userMeta_1nty1_421`,badge:`_badge_1nty1_435`,user:`_user_1nty1_1`,artist:`_artist_1nty1_463`,banned:`_banned_1nty1_355`,actionButtons:`_actionButtons_1nty1_501`,banBtn:`_banBtn_1nty1_537`,unbanBtn:`_unbanBtn_1nty1_559`,deleteBtn:`_deleteBtn_1nty1_581`,emptyState:`_emptyState_1nty1_605`,modalOverlay:`_modalOverlay_1nty1_619`,modalContent:`_modalContent_1nty1_647`,modalHeader:`_modalHeader_1nty1_665`,closeBtn:`_closeBtn_1nty1_693`,modalBody:`_modalBody_1nty1_735`,warningText:`_warningText_1nty1_743`,formGroup:`_formGroup_1nty1_763`,modalActions:`_modalActions_1nty1_827`,cancelBtn:`_cancelBtn_1nty1_839`,confirmBanBtn:`_confirmBanBtn_1nty1_841`,loadingContainer:`_loadingContainer_1nty1_913`,spinner:`_spinner_1nty1_931`,spin:`_spin_1nty1_931`},s=e(i(),1),c=()=>{let[e,n]=(0,a.useState)([]),[i,c]=(0,a.useState)(!0),[l,u]=(0,a.useState)(null),[d,f]=(0,a.useState)(``),[p,m]=(0,a.useState)(null),[h,g]=(0,a.useState)(!1),[_,v]=(0,a.useState)(``),[y,b]=(0,a.useState)(!1);(0,a.useEffect)(()=>{x()},[]);let x=async()=>{c(!0),u(null);try{n(await t.getAllUsers())}catch(e){console.error(`Error fetching users:`,e),u(r(e))}finally{c(!1)}},S=e.filter(e=>{if(d){let t=d.toLowerCase();return e.username.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)}return!0}),C=e=>{m(e),v(``),g(!0)},w=async()=>{if(!_.trim()){alert(`Ban reason is required`);return}b(!0);try{await t.banUser(p.accountId,_),g(!1),x()}catch(e){console.error(`Error banning user:`,e),alert(r(e))}finally{b(!1)}},T=async(e,n)=>{if(window.confirm(`Apakah Anda yakin ingin unban user "${n}"?`))try{await t.unbanUser(e),x()}catch(e){console.error(`Error unbanning user:`,e),alert(r(e))}},E=async(e,n)=>{if(window.confirm(`Apakah Anda yakin ingin menghapus akun "${n}"? Tindakan ini tidak dapat dibatalkan!`))try{await t.deleteUser(e),x()}catch(e){console.error(`Error deleting user:`,e),alert(r(e))}},D=async()=>{if(d.trim()){c(!0);try{n(await t.searchUsers(d))}catch(e){console.error(`Error searching users:`,e),u(r(e))}finally{c(!1)}}else x()};return i?(0,s.jsxs)(`div`,{className:o.loadingContainer,children:[(0,s.jsx)(`div`,{className:o.spinner,children:`â³`}),(0,s.jsx)(`p`,{children:`Loading users...`})]}):(0,s.jsxs)(`div`,{className:o.userManagementContainer,children:[(0,s.jsx)(`div`,{className:o.userHeader,children:(0,s.jsxs)(`div`,{children:[(0,s.jsx)(`h1`,{className:o.pageTitle,children:`User Management`}),(0,s.jsx)(`p`,{className:o.pageSubtitle,children:`Kelola akun user di Melodia`})]})}),l&&(0,s.jsxs)(`div`,{className:o.errorBanner,children:[(0,s.jsxs)(`span`,{children:[`âš ï¸ `,l]}),(0,s.jsx)(`button`,{onClick:()=>u(null),children:`âœ•`})]}),(0,s.jsxs)(`div`,{className:o.controlBar,children:[(0,s.jsxs)(`div`,{className:o.filterTabs,children:[(0,s.jsxs)(`button`,{className:`${o.filterTab} ${o.active}`,children:[`All (`,e.length,`)`]}),(0,s.jsxs)(`button`,{className:`${o.filterTab} ${o.alert}`,children:[`Banned (`,e.filter(e=>e.banned).length,`)`]})]}),(0,s.jsx)(`div`,{className:o.searchBox,children:(0,s.jsx)(`input`,{type:`text`,placeholder:`ðŸ” Search username or email...`,value:d,onChange:e=>f(e.target.value),onKeyDown:e=>e.key===`Enter`&&D()})})]}),(0,s.jsxs)(`div`,{className:o.userTable,children:[(0,s.jsxs)(`table`,{children:[(0,s.jsx)(`thead`,{children:(0,s.jsxs)(`tr`,{children:[(0,s.jsx)(`th`,{children:`Username`}),(0,s.jsx)(`th`,{children:`Email`}),(0,s.jsx)(`th`,{children:`Status`}),(0,s.jsx)(`th`,{children:`Joined`}),(0,s.jsx)(`th`,{children:`Actions`})]})}),(0,s.jsx)(`tbody`,{children:S.map(e=>(0,s.jsxs)(`tr`,{className:e.banned?o.bannedRow:``,children:[(0,s.jsx)(`td`,{children:(0,s.jsxs)(`div`,{className:o.userCell,children:[(0,s.jsx)(`div`,{className:o.userAvatar,children:`ðŸ‘¤`}),(0,s.jsx)(`div`,{children:(0,s.jsx)(`div`,{className:o.userName,children:e.username})})]})}),(0,s.jsx)(`td`,{children:e.email}),(0,s.jsx)(`td`,{children:e.banned?(0,s.jsx)(`span`,{className:`${o.badge} ${o.banned}`,children:`ðŸš« Banned`}):(0,s.jsx)(`span`,{className:`${o.badge} ${o.active}`,children:`âœ… Active`})}),(0,s.jsx)(`td`,{children:e.createdAt?new Date(e.createdAt).toLocaleDateString(`id-ID`):`-`}),(0,s.jsx)(`td`,{children:(0,s.jsxs)(`div`,{className:o.actionButtons,children:[e.banned?(0,s.jsx)(`button`,{className:o.unbanBtn,onClick:()=>T(e.accountId,e.username),title:`Unban user`,children:`ðŸ”“`}):(0,s.jsx)(`button`,{className:o.banBtn,onClick:()=>C(e),title:`Ban user`,children:`ðŸš«`}),(0,s.jsx)(`button`,{className:o.deleteBtn,onClick:()=>E(e.accountId,e.username),title:`Delete account`,children:`ðŸ—‘ï¸`})]})})]},e.accountId))})]}),S.length===0&&(0,s.jsx)(`div`,{className:o.emptyState,children:(0,s.jsx)(`p`,{children:`No users found`})})]}),h&&p&&(0,s.jsx)(`div`,{className:o.modalOverlay,onClick:()=>!y&&g(!1),children:(0,s.jsxs)(`div`,{className:o.modalContent,onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)(`div`,{className:o.modalHeader,children:[(0,s.jsxs)(`h2`,{children:[`Ban User: `,p.username]}),(0,s.jsx)(`button`,{className:o.closeBtn,onClick:()=>g(!1),disabled:y,children:`âœ•`})]}),(0,s.jsxs)(`div`,{className:o.modalBody,children:[(0,s.jsx)(`p`,{className:o.warningText,children:`âš ï¸ User akan di-ban dan tidak dapat login ke aplikasi.`}),(0,s.jsxs)(`div`,{className:o.formGroup,children:[(0,s.jsx)(`label`,{children:`Ban Reason *`}),(0,s.jsx)(`textarea`,{value:_,onChange:e=>v(e.target.value),placeholder:`Masukkan alasan ban (wajib)...`,rows:`4`,required:!0,disabled:y})]})]}),(0,s.jsxs)(`div`,{className:o.modalActions,children:[(0,s.jsx)(`button`,{type:`button`,className:o.cancelBtn,onClick:()=>g(!1),disabled:y,children:`Cancel`}),(0,s.jsx)(`button`,{type:`button`,className:o.confirmBanBtn,onClick:w,disabled:!_.trim()||y,children:y?`Banning...`:`Confirm Ban`})]})]})})]})};export{c as default};