import{m as e,n as t,p as n,r,u as i}from"./index-D0xoUJhe.js";var a=e(n(),1),o={container:`_container_12o67_5`,header:`_header_12o67_17`,loadingContainer:`_loadingContainer_12o67_61`,spinner:`_spinner_12o67_81`,spin:`_spin_12o67_81`,errorBanner:`_errorBanner_12o67_113`,form:`_form_12o67_171`,formRow:`_formRow_12o67_199`,formGroup:`_formGroup_12o67_211`,createBtn:`_createBtn_12o67_309`,tableWrapper:`_tableWrapper_12o67_357`,table:`_table_12o67_357`,bioCell:`_bioCell_12o67_461`,editBtn:`_editBtn_12o67_477`,deleteBtn:`_deleteBtn_12o67_513`,emptyState:`_emptyState_12o67_549`,modalOverlay:`_modalOverlay_12o67_571`,modal:`_modal_12o67_571`,modalHeader:`_modalHeader_12o67_623`,closeBtn:`_closeBtn_12o67_655`,modalForm:`_modalForm_12o67_693`,modalActions:`_modalActions_12o67_705`,cancelBtn:`_cancelBtn_12o67_721`,saveBtn:`_saveBtn_12o67_723`},s=e(i(),1),c=()=>{let[e,n]=(0,a.useState)([]),[i,c]=(0,a.useState)(!0),[l,u]=(0,a.useState)(null),[d,f]=(0,a.useState)(``),[p,m]=(0,a.useState)(``),[h,g]=(0,a.useState)(!1),[_,v]=(0,a.useState)(null),[y,b]=(0,a.useState)(``),[x,S]=(0,a.useState)(``),[C,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>{T()},[]);let T=async()=>{c(!0),u(null);try{n(await t.getAllArtists())}catch(e){console.error(`Error fetching artists:`,e),u(r(e))}finally{c(!1)}},E=async e=>{if(e.preventDefault(),!d.trim()){u(`Artist name is required`);return}g(!0),u(null);try{await t.createArtist(d.trim(),p.trim()),f(``),m(``),await T()}catch(e){console.error(`Error creating artist:`,e),u(r(e))}finally{g(!1)}},D=e=>{v(e),b(e.artistName),S(e.bio||``)},O=()=>{v(null),b(``),S(``)},k=async e=>{if(e.preventDefault(),!y.trim()){alert(`Artist name is required`);return}w(!0);try{await t.updateArtist(_.artistId,y.trim(),x.trim()),await T(),O()}catch(e){console.error(`Error updating artist:`,e),alert(r(e))}finally{w(!1)}},A=async(e,n)=>{if(window.confirm(`Yakin ingin menghapus artist "${n}"?\nJika masih ada lagu yang terhubung, penghapusan bisa gagal.`))try{await t.deleteArtist(e),await T()}catch(e){console.error(`Error deleting artist:`,e),alert(r(e))}};return i?(0,s.jsxs)(`div`,{className:o.loadingContainer,children:[(0,s.jsx)(`div`,{className:o.spinner,children:`â³`}),(0,s.jsx)(`p`,{children:`Loading artists...`})]}):(0,s.jsxs)(`div`,{className:o.container,children:[(0,s.jsxs)(`div`,{className:o.header,children:[(0,s.jsx)(`h1`,{children:`Artist Management`}),(0,s.jsx)(`p`,{children:`Kelola metadata artist yang dipakai saat upload lagu`})]}),l&&(0,s.jsxs)(`div`,{className:o.errorBanner,children:[(0,s.jsxs)(`span`,{children:[`âš ï¸ `,l]}),(0,s.jsx)(`button`,{onClick:()=>u(null),children:`âœ•`})]}),(0,s.jsxs)(`form`,{onSubmit:E,className:o.form,children:[(0,s.jsx)(`div`,{className:o.formRow,children:(0,s.jsxs)(`div`,{className:o.formGroup,children:[(0,s.jsx)(`label`,{children:`Artist Name *`}),(0,s.jsx)(`input`,{type:`text`,value:d,onChange:e=>f(e.target.value),placeholder:`Contoh: Tulus`,disabled:h})]})}),(0,s.jsxs)(`div`,{className:o.formGroup,children:[(0,s.jsx)(`label`,{children:`Bio (optional)`}),(0,s.jsx)(`textarea`,{value:p,onChange:e=>m(e.target.value),placeholder:`Deskripsi singkat artist...`,rows:3,disabled:h})]}),(0,s.jsx)(`button`,{type:`submit`,className:o.createBtn,disabled:h,children:h?`Saving...`:`Add Artist`})]}),(0,s.jsxs)(`div`,{className:o.tableWrapper,children:[(0,s.jsxs)(`table`,{className:o.table,children:[(0,s.jsx)(`thead`,{children:(0,s.jsxs)(`tr`,{children:[(0,s.jsx)(`th`,{children:`Name`}),(0,s.jsx)(`th`,{children:`Bio`}),(0,s.jsx)(`th`,{children:`Total Songs (optional)`}),(0,s.jsx)(`th`,{children:`Actions`})]})}),(0,s.jsx)(`tbody`,{children:e.map(e=>(0,s.jsxs)(`tr`,{children:[(0,s.jsx)(`td`,{children:e.artistName}),(0,s.jsx)(`td`,{className:o.bioCell,children:e.bio&&e.bio.length>120?e.bio.slice(0,120)+`...`:e.bio||`-`}),(0,s.jsx)(`td`,{children:e.totalSongs==null?e.songs?e.songs.length:`-`:e.totalSongs}),(0,s.jsxs)(`td`,{children:[(0,s.jsx)(`button`,{className:o.editBtn,onClick:()=>D(e),children:`âœï¸ Edit`}),(0,s.jsx)(`button`,{className:o.deleteBtn,onClick:()=>A(e.artistId,e.artistName),children:`ðŸ—‘ï¸ Delete`})]})]},e.artistId))})]}),e.length===0&&(0,s.jsx)(`div`,{className:o.emptyState,children:(0,s.jsx)(`p`,{children:`Belum ada artist. Tambahkan artist pertama di atas.`})})]}),_&&(0,s.jsx)(`div`,{className:o.modalOverlay,onClick:O,children:(0,s.jsxs)(`div`,{className:o.modal,onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)(`div`,{className:o.modalHeader,children:[(0,s.jsx)(`h2`,{children:`Edit Artist`}),(0,s.jsx)(`button`,{className:o.closeBtn,onClick:O,children:`âœ•`})]}),(0,s.jsxs)(`form`,{onSubmit:k,className:o.modalForm,children:[(0,s.jsxs)(`div`,{className:o.formGroup,children:[(0,s.jsx)(`label`,{children:`Artist Name *`}),(0,s.jsx)(`input`,{type:`text`,value:y,onChange:e=>b(e.target.value),placeholder:`Artist name`,disabled:C,autoFocus:!0})]}),(0,s.jsxs)(`div`,{className:o.formGroup,children:[(0,s.jsx)(`label`,{children:`Bio (optional)`}),(0,s.jsx)(`textarea`,{value:x,onChange:e=>S(e.target.value),placeholder:`Artist bio...`,rows:4,disabled:C})]}),(0,s.jsxs)(`div`,{className:o.modalActions,children:[(0,s.jsx)(`button`,{type:`button`,className:o.cancelBtn,onClick:O,disabled:C,children:`Cancel`}),(0,s.jsx)(`button`,{type:`submit`,className:o.saveBtn,disabled:C,children:C?`Saving...`:`Save Changes`})]})]})]})})]})};export{c as default};